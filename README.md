# Laravel API для управления студентами, классами и лекциями

## Описание

API для управления образовательной системой с тремя основными сущностями:
- **Студенты** - имеют имя, email и могут принадлежать одному классу
- **Классы** - имеют название и учебный план из лекций
- **Лекции** - имеют тему и описание

## Установка

1. Установите зависимости:
```bash
composer install
```

2. Скопируйте файл конфигурации:
```bash
cp .env.example .env
```

3. Сгенерируйте ключ приложения:
```bash
php artisan key:generate
```

4. Настройте базу данных в файле `.env`

5. Запустите миграции:
```bash
php artisan migrate
```

6. Заполните базу тестовыми данными:
```bash
php artisan db:seed
```

## API Endpoints

### Студенты

#### 1. Получить список всех студентов
```
GET /api/students
```

#### 2. Получить информацию о конкретном студенте
```
GET /api/students/{id}
```
Возвращает: имя, email, класс, прослушанные лекции

#### 3. Создать студента
```
POST /api/students
```
Тело запроса:
```json
{
    "name": "Иван Иванов",
    "email": "ivan@example.com",
    "class_id": 1
}
```

#### 4. Обновить студента
```
PUT /api/students/{id}
```
Тело запроса:
```json
{
    "name": "Иван Петров",
    "class_id": 2
}
```

#### 5. Удалить студента
```
DELETE /api/students/{id}
```

### Классы

#### 6. Получить список всех классов
```
GET /api/classes
```

#### 7. Получить информацию о конкретном классе
```
GET /api/classes/{id}
```
Возвращает: название, студенты класса

#### 8. Получить учебный план для конкретного класса
```
GET /api/classes/{id}/curriculum
```
Возвращает: список лекций в порядке изучения

#### 9. Создать/обновить учебный план для конкретного класса
```
PUT /api/classes/{id}/curriculum
```
Тело запроса:
```json
{
    "lectures": [
        {
            "lecture_id": 1,
            "order": 1
        },
        {
            "lecture_id": 2,
            "order": 2
        }
    ]
}
```

#### 10. Создать класс
```
POST /api/classes
```
Тело запроса:
```json
{
    "name": "10-А класс"
}
```

#### 11. Обновить класс
```
PUT /api/classes/{id}
```
Тело запроса:
```json
{
    "name": "11-А класс"
}
```

#### 12. Удалить класс
```
DELETE /api/classes/{id}
```
При удалении класса студенты открепляются от класса, но не удаляются из системы.

## Структура базы данных

### Таблицы:
- `students` - студенты
- `classes` - классы
- `lectures` - лекции
- `class_lectures` - связь классов с лекциями (учебный план)
- `student_lectures` - связь студентов с прослушанными лекциями

### Связи:
- Студент принадлежит одному классу (class_id)
- Класс содержит много студентов
- Класс имеет учебный план из лекций с порядком изучения
- Студент может прослушать много лекций

## Технические особенности

- Строгая типизация во всех классах
- Валидация данных через Request классы
- Бизнес-логика вынесена в сервисы
- Использование Dependency Injection
- Оптимизированные запросы с жадной загрузкой
- Обработка исключений в контроллерах
- JSON формат ответов

## Примеры ответов

### Успешный ответ:
```json
{
    "success": true,
    "data": {
        "id": 1,
        "name": "Иван Иванов",
        "email": "ivan@example.com",
        "class": {
            "id": 1,
            "name": "10-А класс"
        },
        "attended_lectures": [
            {
                "id": 1,
                "topic": "Математика",
                "pivot": {
                    "attended_at": "2024-01-15T10:00:00.000000Z"
                }
            }
        ]
    }
}
```

### Ошибка:
```json
{
    "success": false,
    "message": "Студент не найден."
}
```

